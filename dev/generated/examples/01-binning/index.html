<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>Binning · Julia MRI Package</title><link href="https://fonts.googleapis.com/css?family=Lato|Roboto+Mono" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.11.2/css/fontawesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.11.2/css/solid.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.11.2/css/brands.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.11.1/katex.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL="../../.."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" data-main="../../../assets/documenter.js"></script><script src="../../../siteinfo.js"></script><script src="../../../../versions.js"></script><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../../assets/themes/documenter-dark.css" data-theme-name="documenter-dark"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../../assets/themes/documenter-light.css" data-theme-name="documenter-light" data-theme-primary/><script src="../../../assets/themeswap.js"></script></head><body><div id="documenter"><nav class="docs-sidebar"><a class="docs-logo" href="../../../"><img src="../../../assets/logo.png" alt="Julia MRI Package logo"/></a><div class="docs-package-name"><span class="docs-autofit">Julia MRI Package</span></div><form class="docs-search" action="../../../search/"><input class="docs-search-query" id="documenter-search-query" name="q" type="text" placeholder="Search docs"/></form><ul class="docs-menu"><li><a class="tocitem" href="../../../">Home</a></li><li><a class="tocitem" href="../../../gettingStarted/">Getting Started</a></li><li><a class="tocitem" href="../../../overview/">Overview</a></li><li><a class="tocitem" href="../../../acquisitionData/">Acquisition Data</a></li><li><a class="tocitem" href="../../../filehandling/">File Handling</a></li><li><a class="tocitem" href="../../../image/">Images</a></li><li><a class="tocitem" href="../../../trajectories/">Trajectory</a></li><li><a class="tocitem" href="../../../operators/">Imaging Operators</a></li><li><a class="tocitem" href="../../../offresonance/">Offresonance</a></li><li><a class="tocitem" href="../../../SENSE/">Parallel Imaging</a></li><li><a class="tocitem" href="../../../compressedSensing/">Compressed Sensing</a></li><li><a class="tocitem" href="../../../custom/">Customize</a></li><li><span class="tocitem">Examples</span><ul><li class="is-active"><a class="tocitem" href>Binning</a><ul class="internal"><li><a class="tocitem" href="#Description"><span>Description</span></a></li><li><a class="tocitem" href="#Setup"><span>Setup</span></a></li><li><a class="tocitem" href="#Simulate-a-radial-acquisition"><span>Simulate a radial acquisition</span></a></li><li><a class="tocitem" href="#Binning-Data"><span>Binning Data</span></a></li><li><a class="tocitem" href="#Reconstruction"><span>Reconstruction</span></a></li><li><a class="tocitem" href="#Reproducibility"><span>Reproducibility</span></a></li></ul></li></ul></li><li><a class="tocitem" href="../../../API/">API</a></li></ul><div class="docs-version-selector field has-addons"><div class="control"><span class="docs-label button is-static is-size-7">Version</span></div><div class="docs-selector control is-expanded"><div class="select is-fullwidth is-size-7"><select id="documenter-version-selector"></select></div></div></div></nav><div class="docs-main"><header class="docs-navbar"><nav class="breadcrumb"><ul class="is-hidden-mobile"><li><a class="is-disabled">Examples</a></li><li class="is-active"><a href>Binning</a></li></ul><ul class="is-hidden-tablet"><li class="is-active"><a href>Binning</a></li></ul></nav><div class="docs-right"><a class="docs-edit-link" href="https://github.com/MagneticResonanceImaging/MRIReco.jl/blob/master/docs/lit/examples/01-binning.jl" title="Edit on GitHub"><span class="docs-icon fab"></span><span class="docs-label is-hidden-touch">Edit on GitHub</span></a><a class="docs-settings-button fas fa-cog" id="documenter-settings-button" href="#" title="Settings"></a><a class="docs-sidebar-button fa fa-bars is-hidden-desktop" id="documenter-sidebar-button" href="#"></a></div></header><article class="content" id="documenter-page"><h1 id="binning"><a class="docs-heading-anchor" href="#binning">Binning</a><a id="binning-1"></a><a class="docs-heading-anchor-permalink" href="#binning" title="Permalink"></a></h1><h2 id="Description"><a class="docs-heading-anchor" href="#Description">Description</a><a id="Description-1"></a><a class="docs-heading-anchor-permalink" href="#Description" title="Permalink"></a></h2><p>This example described how to perform data binning with different number of profiles which is generaly used for self-gating acquisition in order to reconstruct images along the cardiac/respiratory cycle :</p><ol><li>Trotier AJ, Castets CR, Lefrançois W, et al. USPIO-enhanced 3D-cine self-gated cardiac MRI based on a stack-of-stars golden angle short echo time sequence: Application on mice with acute myocardial infarction. Journal of Magnetic Resonance Imaging 2016;44:355–365 doi: 10.1002/jmri.25150.</li><li>Ribot EJ, Duriez TJ, Trotier AJ, Thiaudiere E, Franconi J-M, Miraux S. Self-gated bSSFP sequences to detect iron-labeled cancer cells and/or metastases in vivo in mouse liver at 7 Tesla. Journal of Magnetic Resonance Imaging 2015;41:1413–1421 doi: 10.1002/jmri.24688.</li></ol><p>Here, we will create a simulated 2D radial acquisition and split the projections in 2 parts along the contrast dimension. The number of projection into each bin will be different to show how MRIReco handle that case.</p><h2 id="Setup"><a class="docs-heading-anchor" href="#Setup">Setup</a><a id="Setup-1"></a><a class="docs-heading-anchor-permalink" href="#Setup" title="Permalink"></a></h2><pre><code class="language-julia">using CairoMakie
using ImageUtils: shepp_logan
using MRIReco, MRISimulation

function plot_im2D(im2D;title::String=&quot;&quot;)
    f = Figure()
    ax = Axis(f[1, 1],aspect = DataAspect(), yreversed = true, title = title)
    image!(ax, im2D&#39;)
    hidedecorations!(ax, grid = false)
    f
end</code></pre><pre class="documenter-example-output">plot_im2D (generic function with 1 method)</pre><h2 id="Simulate-a-radial-acquisition"><a class="docs-heading-anchor" href="#Simulate-a-radial-acquisition">Simulate a radial acquisition</a><a id="Simulate-a-radial-acquisition-1"></a><a class="docs-heading-anchor-permalink" href="#Simulate-a-radial-acquisition" title="Permalink"></a></h2><pre><code class="language-julia">N = 256
x = shepp_logan(N)

params = Dict{Symbol, Any}()
params[:simulation] = &quot;fast&quot;
params[:trajName] = &quot;Radial&quot;
params[:numProfiles] = round(Int64,400)
params[:numSamplingPerProfile] = round(Int64,N)

acqRad = simulation(x, params)
rawRad = RawAcquisitionData(acqRad)</code></pre><pre class="documenter-example-output">RawAcquisitionData(Dict{String, Any}(&quot;H1resonanceFrequency_Hz&quot; =&gt; 1, &quot;encodedFOV&quot; =&gt; [0.0, 0.0, 0.0], &quot;receiverChannels&quot; =&gt; 1, &quot;encodedSize&quot; =&gt; [256, 256], &quot;trajectory&quot; =&gt; &quot;Radial&quot;), Profile[Profile(AcquisitionHeader(0x0000, 0x0000000000000000, 0x00000000, 0x00000001, 0x00000000, (0x00000000, 0x00000000, 0x00000000), 0x0100, 0x0001, 0x0001, (0x0000000000000000, 0x0000000000000000, 0x0000000000000000, 0x0000000000000000, 0x0000000000000000, 0x0000000000000000, 0x0000000000000000, 0x0000000000000000, 0x0000000000000000, 0x0000000000000000, 0x0000000000000000, 0x0000000000000000, 0x0000000000000000, 0x0000000000000000, 0x0000000000000000, 0x0000000000000000), 0x0000, 0x0000, 0x0000, 0x0000, 0x0002, 3.90625f0, (0.0f0, 0.0f0, 0.0f0), (1.0f0, 0.0f0, 0.0f0), (0.0f0, 1.0f0, 0.0f0), (0.0f0, 0.0f0, 1.0f0), (0.0f0, 0.0f0, 0.0f0), EncodingCounters(0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, (0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000)), (0, 0, 0, 0, 0, 0, 0, 0), (0.0f0, 0.0f0, 0.0f0, 0.0f0, 0.0f0, 0.0f0, 0.0f0, 0.0f0)), Float32[0.5 0.49609375 … -0.4921875 -0.49609375; 0.0 0.0 … -0.0 -0.0], ComplexF32[14.993935f0 - 0.014462396f0im; -2.745702f0 - 17.48758f0im; … ; -1.7356578f0 + 1.6820171f0im; -2.7453408f0 + 17.487709f0im;;]), Profile(AcquisitionHeader(0x0000, 0x0000000000000000, 0x00000000, 0x00000002, 0x00000000, (0x00000000, 0x00000000, 0x00000000), 0x0100, 0x0001, 0x0001, (0x0000000000000000, 0x0000000000000000, 0x0000000000000000, 0x0000000000000000, 0x0000000000000000, 0x0000000000000000, 0x0000000000000000, 0x0000000000000000, 0x0000000000000000, 0x0000000000000000, 0x0000000000000000, 0x0000000000000000, 0x0000000000000000, 0x0000000000000000, 0x0000000000000000, 0x0000000000000000), 0x0000, 0x0000, 0x0000, 0x0000, 0x0002, 3.90625f0, (0.0f0, 0.0f0, 0.0f0), (1.0f0, 0.0f0, 0.0f0), (0.0f0, 1.0f0, 0.0f0), (0.0f0, 0.0f0, 1.0f0), (0.0f0, 0.0f0, 0.0f0), EncodingCounters(0x0001, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, (0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000)), (0, 0, 0, 0, 0, 0, 0, 0), (0.0f0, 0.0f0, 0.0f0, 0.0f0, 0.0f0, 0.0f0, 0.0f0, 0.0f0)), Float32[-0.4999846 -0.49607846 … 0.49217233 0.49607846; -0.0039269505 -0.003896271 … 0.003865592 0.003896271], ComplexF32[5.082206f0 - 0.46051154f0im; -7.301943f0 - 3.8703349f0im; … ; 4.533107f0 - 5.784494f0im; -7.301943f0 + 3.8703349f0im;;]), Profile(AcquisitionHeader(0x0000, 0x0000000000000000, 0x00000000, 0x00000003, 0x00000000, (0x00000000, 0x00000000, 0x00000000), 0x0100, 0x0001, 0x0001, (0x0000000000000000, 0x0000000000000000, 0x0000000000000000, 0x0000000000000000, 0x0000000000000000, 0x0000000000000000, 0x0000000000000000, 0x0000000000000000, 0x0000000000000000, 0x0000000000000000, 0x0000000000000000, 0x0000000000000000, 0x0000000000000000, 0x0000000000000000, 0x0000000000000000, 0x0000000000000000), 0x0000, 0x0000, 0x0000, 0x0000, 0x0002, 3.90625f0, (0.0f0, 0.0f0, 0.0f0), (1.0f0, 0.0f0, 0.0f0), (0.0f0, 1.0f0, 0.0f0), (0.0f0, 0.0f0, 1.0f0), (0.0f0, 0.0f0, 0.0f0), EncodingCounters(0x0002, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, (0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000)), (0, 0, 0, 0, 0, 0, 0, 0), (0.0f0, 0.0f0, 0.0f0, 0.0f0, 0.0f0, 0.0f0, 0.0f0, 0.0f0)), Float32[0.4999383 0.49603254 … -0.4921268 -0.49603254; 0.007853659 0.007792302 … -0.007730945 -0.007792302], ComplexF32[2.961479f0 + 1.6425503f0im; -9.065082f0 + 19.113466f0im; … ; 8.297119f0 + 6.7589464f0im; -9.065082f0 - 19.113466f0im;;]), Profile(AcquisitionHeader(0x0000, 0x0000000000000000, 0x00000000, 0x00000004, 0x00000000, (0x00000000, 0x00000000, 0x00000000), 0x0100, 0x0001, 0x0001, (0x0000000000000000, 0x0000000000000000, 0x0000000000000000, 0x0000000000000000, 0x0000000000000000, 0x0000000000000000, 0x0000000000000000, 0x0000000000000000, 0x0000000000000000, 0x0000000000000000, 0x0000000000000000, 0x0000000000000000, 0x0000000000000000, 0x0000000000000000, 0x0000000000000000, 0x0000000000000000), 0x0000, 0x0000, 0x0000, 0x0000, 0x0002, 3.90625f0, (0.0f0, 0.0f0, 0.0f0), (1.0f0, 0.0f0, 0.0f0), (0.0f0, 1.0f0, 0.0f0), (0.0f0, 0.0f0, 1.0f0), (0.0f0, 0.0f0, 0.0f0), EncodingCounters(0x0003, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, (0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000)), (0, 0, 0, 0, 0, 0, 0, 0), (0.0f0, 0.0f0, 0.0f0, 0.0f0, 0.0f0, 0.0f0, 0.0f0, 0.0f0)), Float32[-0.4998612 -0.49595606 … 0.4920509 0.49595606; -0.011779882 -0.011687852 … 0.011595822 0.011687852], ComplexF32[16.566261f0 - 2.3455367f0im; -2.9743297f0 + 6.258768f0im; … ; 0.7448429f0 + 0.29103297f0im; -2.9743297f0 - 6.258768f0im;;]), Profile(AcquisitionHeader(0x0000, 0x0000000000000000, 0x00000000, 0x00000005, 0x00000000, (0x00000000, 0x00000000, 0x00000000), 0x0100, 0x0001, 0x0001, (0x0000000000000000, 0x0000000000000000, 0x0000000000000000, 0x0000000000000000, 0x0000000000000000, 0x0000000000000000, 0x0000000000000000, 0x0000000000000000, 0x0000000000000000, 0x0000000000000000, 0x0000000000000000, 0x0000000000000000, 0x0000000000000000, 0x0000000000000000, 0x0000000000000000, 0x0000000000000000), 0x0000, 0x0000, 0x0000, 0x0000, 0x0002, 3.90625f0, (0.0f0, 0.0f0, 0.0f0), (1.0f0, 0.0f0, 0.0f0), (0.0f0, 1.0f0, 0.0f0), (0.0f0, 0.0f0, 1.0f0), (0.0f0, 0.0f0, 0.0f0), EncodingCounters(0x0004, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, (0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000)), (0, 0, 0, 0, 0, 0, 0, 0), (0.0f0, 0.0f0, 0.0f0, 0.0f0, 0.0f0, 0.0f0, 0.0f0, 0.0f0)), Float32[0.49975327 0.49584895 … -0.49194464 -0.49584895; 0.015705379 0.015582682 … -0.015459983 -0.015582682], ComplexF32[9.999771f0 + 2.6336045f0im; -4.0890183f0 - 13.689984f0im; … ; 0.23596795f0 - 1.4290216f0im; -4.0890183f0 + 13.689984f0im;;]), Profile(AcquisitionHeader(0x0000, 0x0000000000000000, 0x00000000, 0x00000006, 0x00000000, (0x00000000, 0x00000000, 0x00000000), 0x0100, 0x0001, 0x0001, (0x0000000000000000, 0x0000000000000000, 0x0000000000000000, 0x0000000000000000, 0x0000000000000000, 0x0000000000000000, 0x0000000000000000, 0x0000000000000000, 0x0000000000000000, 0x0000000000000000, 0x0000000000000000, 0x0000000000000000, 0x0000000000000000, 0x0000000000000000, 0x0000000000000000, 0x0000000000000000), 0x0000, 0x0000, 0x0000, 0x0000, 0x0002, 3.90625f0, (0.0f0, 0.0f0, 0.0f0), (1.0f0, 0.0f0, 0.0f0), (0.0f0, 1.0f0, 0.0f0), (0.0f0, 0.0f0, 1.0f0), (0.0f0, 0.0f0, 0.0f0), EncodingCounters(0x0005, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, (0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000)), (0, 0, 0, 0, 0, 0, 0, 0), (0.0f0, 0.0f0, 0.0f0, 0.0f0, 0.0f0, 0.0f0, 0.0f0, 0.0f0)), Float32[-0.4996145 -0.49571127 … 0.49180803 0.49571127; -0.019629909 -0.01947655 … 0.01932319 0.01947655], ComplexF32[-3.4125814f0 - 6.9961543f0im; -8.001315f0 - 12.458125f0im; … ; 8.93454f0 - 3.6784592f0im; -8.001315f0 + 12.458125f0im;;]), Profile(AcquisitionHeader(0x0000, 0x0000000000000000, 0x00000000, 0x00000007, 0x00000000, (0x00000000, 0x00000000, 0x00000000), 0x0100, 0x0001, 0x0001, (0x0000000000000000, 0x0000000000000000, 0x0000000000000000, 0x0000000000000000, 0x0000000000000000, 0x0000000000000000, 0x0000000000000000, 0x0000000000000000, 0x0000000000000000, 0x0000000000000000, 0x0000000000000000, 0x0000000000000000, 0x0000000000000000, 0x0000000000000000, 0x0000000000000000, 0x0000000000000000), 0x0000, 0x0000, 0x0000, 0x0000, 0x0002, 3.90625f0, (0.0f0, 0.0f0, 0.0f0), (1.0f0, 0.0f0, 0.0f0), (0.0f0, 1.0f0, 0.0f0), (0.0f0, 0.0f0, 1.0f0), (0.0f0, 0.0f0, 0.0f0), EncodingCounters(0x0006, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, (0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000)), (0, 0, 0, 0, 0, 0, 0, 0), (0.0f0, 0.0f0, 0.0f0, 0.0f0, 0.0f0, 0.0f0, 0.0f0, 0.0f0)), Float32[0.49944493 0.49554303 … -0.4916411 -0.49554303; 0.023553226 0.023369215 … -0.023185207 -0.023369215], ComplexF32[5.817503f0 + 8.687793f0im; -6.0875187f0 + 7.5072694f0im; … ; 7.8041325f0 + 3.3605914f0im; -6.0875187f0 - 7.5072694f0im;;]), Profile(AcquisitionHeader(0x0000, 0x0000000000000000, 0x00000000, 0x00000008, 0x00000000, (0x00000000, 0x00000000, 0x00000000), 0x0100, 0x0001, 0x0001, (0x0000000000000000, 0x0000000000000000, 0x0000000000000000, 0x0000000000000000, 0x0000000000000000, 0x0000000000000000, 0x0000000000000000, 0x0000000000000000, 0x0000000000000000, 0x0000000000000000, 0x0000000000000000, 0x0000000000000000, 0x0000000000000000, 0x0000000000000000, 0x0000000000000000, 0x0000000000000000), 0x0000, 0x0000, 0x0000, 0x0000, 0x0002, 3.90625f0, (0.0f0, 0.0f0, 0.0f0), (1.0f0, 0.0f0, 0.0f0), (0.0f0, 1.0f0, 0.0f0), (0.0f0, 0.0f0, 1.0f0), (0.0f0, 0.0f0, 0.0f0), EncodingCounters(0x0007, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, (0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000)), (0, 0, 0, 0, 0, 0, 0, 0), (0.0f0, 0.0f0, 0.0f0, 0.0f0, 0.0f0, 0.0f0, 0.0f0, 0.0f0)), Float32[-0.49924454 -0.4953442 … 0.49144384 0.4953442; -0.02747509 -0.027260441 … 0.027045792 0.027260441], ComplexF32[11.766594f0 - 3.1228037f0im; -8.0251f0 + 19.106346f0im; … ; 2.1835642f0 + 2.4805624f0im; -8.0251f0 - 19.106346f0im;;]), Profile(AcquisitionHeader(0x0000, 0x0000000000000000, 0x00000000, 0x00000009, 0x00000000, (0x00000000, 0x00000000, 0x00000000), 0x0100, 0x0001, 0x0001, (0x0000000000000000, 0x0000000000000000, 0x0000000000000000, 0x0000000000000000, 0x0000000000000000, 0x0000000000000000, 0x0000000000000000, 0x0000000000000000, 0x0000000000000000, 0x0000000000000000, 0x0000000000000000, 0x0000000000000000, 0x0000000000000000, 0x0000000000000000, 0x0000000000000000, 0x0000000000000000), 0x0000, 0x0000, 0x0000, 0x0000, 0x0002, 3.90625f0, (0.0f0, 0.0f0, 0.0f0), (1.0f0, 0.0f0, 0.0f0), (0.0f0, 1.0f0, 0.0f0), (0.0f0, 0.0f0, 1.0f0), (0.0f0, 0.0f0, 0.0f0), EncodingCounters(0x0008, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, (0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000)), (0, 0, 0, 0, 0, 0, 0, 0), (0.0f0, 0.0f0, 0.0f0, 0.0f0, 0.0f0, 0.0f0, 0.0f0, 0.0f0)), Float32[0.49901336 0.49511483 … -0.49121627 -0.49511483; 0.03139526 0.031149983 … -0.030904708 -0.031149983], ComplexF32[1.8170606f0 + 6.1379848f0im; -10.68053f0 - 7.014571f0im; … ; 7.586608f0 - 6.249012f0im; -10.68053f0 + 7.014571f0im;;]), Profile(AcquisitionHeader(0x0000, 0x0000000000000000, 0x00000000, 0x0000000a, 0x00000000, (0x00000000, 0x00000000, 0x00000000), 0x0100, 0x0001, 0x0001, (0x0000000000000000, 0x0000000000000000, 0x0000000000000000, 0x0000000000000000, 0x0000000000000000, 0x0000000000000000, 0x0000000000000000, 0x0000000000000000, 0x0000000000000000, 0x0000000000000000, 0x0000000000000000, 0x0000000000000000, 0x0000000000000000, 0x0000000000000000, 0x0000000000000000, 0x0000000000000000), 0x0000, 0x0000, 0x0000, 0x0000, 0x0002, 3.90625f0, (0.0f0, 0.0f0, 0.0f0), (1.0f0, 0.0f0, 0.0f0), (0.0f0, 1.0f0, 0.0f0), (0.0f0, 0.0f0, 1.0f0), (0.0f0, 0.0f0, 0.0f0), EncodingCounters(0x0009, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, (0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000)), (0, 0, 0, 0, 0, 0, 0, 0), (0.0f0, 0.0f0, 0.0f0, 0.0f0, 0.0f0, 0.0f0, 0.0f0, 0.0f0)), Float32[-0.4987514 -0.4948549 … 0.49095842 0.4948549; -0.035313495 -0.035037607 … 0.03476172 0.035037607], ComplexF32[2.5731554f0 - 12.080997f0im; -5.5287757f0 - 6.6514955f0im; … ; 12.245896f0 + 7.3431664f0im; -5.5287757f0 + 6.6514955f0im;;])  …  Profile(AcquisitionHeader(0x0000, 0x0000000000000000, 0x00000000, 0x00000187, 0x00000000, (0x00000000, 0x00000000, 0x00000000), 0x0100, 0x0001, 0x0001, (0x0000000000000000, 0x0000000000000000, 0x0000000000000000, 0x0000000000000000, 0x0000000000000000, 0x0000000000000000, 0x0000000000000000, 0x0000000000000000, 0x0000000000000000, 0x0000000000000000, 0x0000000000000000, 0x0000000000000000, 0x0000000000000000, 0x0000000000000000, 0x0000000000000000, 0x0000000000000000), 0x0000, 0x0000, 0x0000, 0x0000, 0x0002, 3.90625f0, (0.0f0, 0.0f0, 0.0f0), (1.0f0, 0.0f0, 0.0f0), (0.0f0, 1.0f0, 0.0f0), (0.0f0, 0.0f0, 1.0f0), (0.0f0, 0.0f0, 0.0f0), EncodingCounters(0x0186, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, (0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000)), (0, 0, 0, 0, 0, 0, 0, 0), (0.0f0, 0.0f0, 0.0f0, 0.0f0, 0.0f0, 0.0f0, 0.0f0, 0.0f0)), Float32[-0.49845865 -0.49456444 … 0.49067026 0.49456444; 0.03922955 0.038923066 … -0.038616586 -0.038923066], ComplexF32[10.05843f0 - 1.3539083f0im; -8.455272f0 + 16.258371f0im; … ; 11.0733595f0 + 8.79255f0im; -8.455272f0 - 16.258371f0im;;]), Profile(AcquisitionHeader(0x0000, 0x0000000000000000, 0x00000000, 0x00000188, 0x00000000, (0x00000000, 0x00000000, 0x00000000), 0x0100, 0x0001, 0x0001, (0x0000000000000000, 0x0000000000000000, 0x0000000000000000, 0x0000000000000000, 0x0000000000000000, 0x0000000000000000, 0x0000000000000000, 0x0000000000000000, 0x0000000000000000, 0x0000000000000000, 0x0000000000000000, 0x0000000000000000, 0x0000000000000000, 0x0000000000000000, 0x0000000000000000, 0x0000000000000000), 0x0000, 0x0000, 0x0000, 0x0000, 0x0002, 3.90625f0, (0.0f0, 0.0f0, 0.0f0), (1.0f0, 0.0f0, 0.0f0), (0.0f0, 1.0f0, 0.0f0), (0.0f0, 0.0f0, 1.0f0), (0.0f0, 0.0f0, 0.0f0), EncodingCounters(0x0187, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, (0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000)), (0, 0, 0, 0, 0, 0, 0, 0), (0.0f0, 0.0f0, 0.0f0, 0.0f0, 0.0f0, 0.0f0, 0.0f0, 0.0f0)), Float32[0.4987514 0.4948549 … -0.49095842 -0.4948549; -0.035313495 -0.035037607 … 0.03476172 0.035037607], ComplexF32[5.536305f0 + 12.6587925f0im; -2.594134f0 + 6.632514f0im; … ; 15.055162f0 - 2.1961787f0im; -2.594134f0 - 6.632514f0im;;]), Profile(AcquisitionHeader(0x0000, 0x0000000000000000, 0x00000000, 0x00000189, 0x00000000, (0x00000000, 0x00000000, 0x00000000), 0x0100, 0x0001, 0x0001, (0x0000000000000000, 0x0000000000000000, 0x0000000000000000, 0x0000000000000000, 0x0000000000000000, 0x0000000000000000, 0x0000000000000000, 0x0000000000000000, 0x0000000000000000, 0x0000000000000000, 0x0000000000000000, 0x0000000000000000, 0x0000000000000000, 0x0000000000000000, 0x0000000000000000, 0x0000000000000000), 0x0000, 0x0000, 0x0000, 0x0000, 0x0002, 3.90625f0, (0.0f0, 0.0f0, 0.0f0), (1.0f0, 0.0f0, 0.0f0), (0.0f0, 1.0f0, 0.0f0), (0.0f0, 0.0f0, 1.0f0), (0.0f0, 0.0f0, 0.0f0), EncodingCounters(0x0188, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, (0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000)), (0, 0, 0, 0, 0, 0, 0, 0), (0.0f0, 0.0f0, 0.0f0, 0.0f0, 0.0f0, 0.0f0, 0.0f0, 0.0f0)), Float32[-0.49901336 -0.49511483 … 0.49121627 0.49511483; 0.03139526 0.031149983 … -0.030904708 -0.031149983], ComplexF32[3.3057163f0 - 6.911439f0im; -10.649474f0 + 5.8795266f0im; … ; 9.651593f0 + 2.8329146f0im; -10.649474f0 - 5.8795266f0im;;]), Profile(AcquisitionHeader(0x0000, 0x0000000000000000, 0x00000000, 0x0000018a, 0x00000000, (0x00000000, 0x00000000, 0x00000000), 0x0100, 0x0001, 0x0001, (0x0000000000000000, 0x0000000000000000, 0x0000000000000000, 0x0000000000000000, 0x0000000000000000, 0x0000000000000000, 0x0000000000000000, 0x0000000000000000, 0x0000000000000000, 0x0000000000000000, 0x0000000000000000, 0x0000000000000000, 0x0000000000000000, 0x0000000000000000, 0x0000000000000000, 0x0000000000000000), 0x0000, 0x0000, 0x0000, 0x0000, 0x0002, 3.90625f0, (0.0f0, 0.0f0, 0.0f0), (1.0f0, 0.0f0, 0.0f0), (0.0f0, 1.0f0, 0.0f0), (0.0f0, 0.0f0, 1.0f0), (0.0f0, 0.0f0, 0.0f0), EncodingCounters(0x0189, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, (0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000)), (0, 0, 0, 0, 0, 0, 0, 0), (0.0f0, 0.0f0, 0.0f0, 0.0f0, 0.0f0, 0.0f0, 0.0f0, 0.0f0)), Float32[0.49924454 0.4953442 … -0.49144384 -0.4953442; -0.02747509 -0.027260441 … 0.027045792 0.027260441], ComplexF32[12.007651f0 + 0.31225017f0im; -10.996951f0 - 18.835096f0im; … ; 3.1901186f0 - 2.1595764f0im; -10.996951f0 + 18.835096f0im;;]), Profile(AcquisitionHeader(0x0000, 0x0000000000000000, 0x00000000, 0x0000018b, 0x00000000, (0x00000000, 0x00000000, 0x00000000), 0x0100, 0x0001, 0x0001, (0x0000000000000000, 0x0000000000000000, 0x0000000000000000, 0x0000000000000000, 0x0000000000000000, 0x0000000000000000, 0x0000000000000000, 0x0000000000000000, 0x0000000000000000, 0x0000000000000000, 0x0000000000000000, 0x0000000000000000, 0x0000000000000000, 0x0000000000000000, 0x0000000000000000, 0x0000000000000000), 0x0000, 0x0000, 0x0000, 0x0000, 0x0002, 3.90625f0, (0.0f0, 0.0f0, 0.0f0), (1.0f0, 0.0f0, 0.0f0), (0.0f0, 1.0f0, 0.0f0), (0.0f0, 0.0f0, 1.0f0), (0.0f0, 0.0f0, 0.0f0), EncodingCounters(0x018a, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, (0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000)), (0, 0, 0, 0, 0, 0, 0, 0), (0.0f0, 0.0f0, 0.0f0, 0.0f0, 0.0f0, 0.0f0, 0.0f0, 0.0f0)), Float32[-0.49944493 -0.49554303 … 0.4916411 0.49554303; 0.023553226 0.023369215 … -0.023185207 -0.023369215], ComplexF32[6.6472697f0 - 4.5136094f0im; -5.344333f0 - 6.108877f0im; … ; 8.043598f0 - 3.0316396f0im; -5.344333f0 + 6.108877f0im;;]), Profile(AcquisitionHeader(0x0000, 0x0000000000000000, 0x00000000, 0x0000018c, 0x00000000, (0x00000000, 0x00000000, 0x00000000), 0x0100, 0x0001, 0x0001, (0x0000000000000000, 0x0000000000000000, 0x0000000000000000, 0x0000000000000000, 0x0000000000000000, 0x0000000000000000, 0x0000000000000000, 0x0000000000000000, 0x0000000000000000, 0x0000000000000000, 0x0000000000000000, 0x0000000000000000, 0x0000000000000000, 0x0000000000000000, 0x0000000000000000, 0x0000000000000000), 0x0000, 0x0000, 0x0000, 0x0000, 0x0002, 3.90625f0, (0.0f0, 0.0f0, 0.0f0), (1.0f0, 0.0f0, 0.0f0), (0.0f0, 1.0f0, 0.0f0), (0.0f0, 0.0f0, 1.0f0), (0.0f0, 0.0f0, 0.0f0), EncodingCounters(0x018b, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, (0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000)), (0, 0, 0, 0, 0, 0, 0, 0), (0.0f0, 0.0f0, 0.0f0, 0.0f0, 0.0f0, 0.0f0, 0.0f0, 0.0f0)), Float32[0.4996145 0.49571127 … -0.49180803 -0.49571127; -0.019629909 -0.01947655 … 0.01932319 0.01947655], ComplexF32[-2.846417f0 + 2.951415f0im; -6.325493f0 + 10.367838f0im; … ; 9.957207f0 + 3.5855086f0im; -6.325493f0 - 10.367838f0im;;]), Profile(AcquisitionHeader(0x0000, 0x0000000000000000, 0x00000000, 0x0000018d, 0x00000000, (0x00000000, 0x00000000, 0x00000000), 0x0100, 0x0001, 0x0001, (0x0000000000000000, 0x0000000000000000, 0x0000000000000000, 0x0000000000000000, 0x0000000000000000, 0x0000000000000000, 0x0000000000000000, 0x0000000000000000, 0x0000000000000000, 0x0000000000000000, 0x0000000000000000, 0x0000000000000000, 0x0000000000000000, 0x0000000000000000, 0x0000000000000000, 0x0000000000000000), 0x0000, 0x0000, 0x0000, 0x0000, 0x0002, 3.90625f0, (0.0f0, 0.0f0, 0.0f0), (1.0f0, 0.0f0, 0.0f0), (0.0f0, 1.0f0, 0.0f0), (0.0f0, 0.0f0, 1.0f0), (0.0f0, 0.0f0, 0.0f0), EncodingCounters(0x018c, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, (0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000)), (0, 0, 0, 0, 0, 0, 0, 0), (0.0f0, 0.0f0, 0.0f0, 0.0f0, 0.0f0, 0.0f0, 0.0f0, 0.0f0)), Float32[-0.49975327 -0.49584895 … 0.49194464 0.49584895; 0.015705379 0.015582682 … -0.015459983 -0.015582682], ComplexF32[10.062752f0 + 2.2095094f0im; -4.453672f0 + 16.220171f0im; … ; 2.3116508f0 + 1.4371337f0im; -4.453672f0 - 16.220171f0im;;]), Profile(AcquisitionHeader(0x0000, 0x0000000000000000, 0x00000000, 0x0000018e, 0x00000000, (0x00000000, 0x00000000, 0x00000000), 0x0100, 0x0001, 0x0001, (0x0000000000000000, 0x0000000000000000, 0x0000000000000000, 0x0000000000000000, 0x0000000000000000, 0x0000000000000000, 0x0000000000000000, 0x0000000000000000, 0x0000000000000000, 0x0000000000000000, 0x0000000000000000, 0x0000000000000000, 0x0000000000000000, 0x0000000000000000, 0x0000000000000000, 0x0000000000000000), 0x0000, 0x0000, 0x0000, 0x0000, 0x0002, 3.90625f0, (0.0f0, 0.0f0, 0.0f0), (1.0f0, 0.0f0, 0.0f0), (0.0f0, 1.0f0, 0.0f0), (0.0f0, 0.0f0, 1.0f0), (0.0f0, 0.0f0, 0.0f0), EncodingCounters(0x018d, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, (0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000)), (0, 0, 0, 0, 0, 0, 0, 0), (0.0f0, 0.0f0, 0.0f0, 0.0f0, 0.0f0, 0.0f0, 0.0f0, 0.0f0)), Float32[0.4998612 0.49595606 … -0.4920509 -0.49595606; -0.011779882 -0.011687852 … 0.011595822 0.011687852], ComplexF32[16.642382f0 - 1.3235054f0im; -2.33835f0 - 8.296187f0im; … ; 2.0819774f0 + 0.37532032f0im; -2.33835f0 + 8.296187f0im;;]), Profile(AcquisitionHeader(0x0000, 0x0000000000000000, 0x00000000, 0x0000018f, 0x00000000, (0x00000000, 0x00000000, 0x00000000), 0x0100, 0x0001, 0x0001, (0x0000000000000000, 0x0000000000000000, 0x0000000000000000, 0x0000000000000000, 0x0000000000000000, 0x0000000000000000, 0x0000000000000000, 0x0000000000000000, 0x0000000000000000, 0x0000000000000000, 0x0000000000000000, 0x0000000000000000, 0x0000000000000000, 0x0000000000000000, 0x0000000000000000, 0x0000000000000000), 0x0000, 0x0000, 0x0000, 0x0000, 0x0002, 3.90625f0, (0.0f0, 0.0f0, 0.0f0), (1.0f0, 0.0f0, 0.0f0), (0.0f0, 1.0f0, 0.0f0), (0.0f0, 0.0f0, 1.0f0), (0.0f0, 0.0f0, 0.0f0), EncodingCounters(0x018e, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, (0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000)), (0, 0, 0, 0, 0, 0, 0, 0), (0.0f0, 0.0f0, 0.0f0, 0.0f0, 0.0f0, 0.0f0, 0.0f0, 0.0f0)), Float32[-0.4999383 -0.49603254 … 0.4921268 0.49603254; 0.007853659 0.007792302 … -0.007730945 -0.007792302], ComplexF32[3.0175219f0 - 0.2766111f0im; -7.636106f0 - 18.211138f0im; … ; 8.107178f0 - 7.6346684f0im; -7.636106f0 + 18.211138f0im;;]), Profile(AcquisitionHeader(0x0000, 0x0000000000000000, 0x00000000, 0x00000190, 0x00000000, (0x00000000, 0x00000000, 0x00000000), 0x0100, 0x0001, 0x0001, (0x0000000000000000, 0x0000000000000000, 0x0000000000000000, 0x0000000000000000, 0x0000000000000000, 0x0000000000000000, 0x0000000000000000, 0x0000000000000000, 0x0000000000000000, 0x0000000000000000, 0x0000000000000000, 0x0000000000000000, 0x0000000000000000, 0x0000000000000000, 0x0000000000000000, 0x0000000000000000), 0x0000, 0x0000, 0x0000, 0x0000, 0x0002, 3.90625f0, (0.0f0, 0.0f0, 0.0f0), (1.0f0, 0.0f0, 0.0f0), (0.0f0, 1.0f0, 0.0f0), (0.0f0, 0.0f0, 1.0f0), (0.0f0, 0.0f0, 0.0f0), EncodingCounters(0x018f, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, (0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000)), (0, 0, 0, 0, 0, 0, 0, 0), (0.0f0, 0.0f0, 0.0f0, 0.0f0, 0.0f0, 0.0f0, 0.0f0, 0.0f0)), Float32[0.4999846 0.49607846 … -0.49217233 -0.49607846; -0.0039269505 -0.003896271 … 0.003865592 0.003896271], ComplexF32[5.086101f0 - 0.143221f0im; -7.220583f0 + 3.4889958f0im; … ; 3.9863534f0 + 6.037494f0im; -7.220583f0 - 3.4889958f0im;;])])</pre><p>For real acquisition we first create the RawAcquisitionData structure and then convert into the AcquisitionData.</p><h2 id="Binning-Data"><a class="docs-heading-anchor" href="#Binning-Data">Binning Data</a><a id="Binning-Data-1"></a><a class="docs-heading-anchor-permalink" href="#Binning-Data" title="Permalink"></a></h2><pre><code class="language-julia">rawRad2 = deepcopy(rawRad)
for i in 1:length(rawRad.profiles)
    if  mod(i,4) == 0
        rawRad2.profiles[i].head.idx.contrast = 0
    else
        rawRad2.profiles[i].head.idx.contrast = 1
    end
end;</code></pre><p>We need to tell to MRIReco that our trajectory is a custom one :</p><pre><code class="language-julia">rawRad2.params[&quot;trajectory&quot;] = &quot;custom&quot;;</code></pre><h2 id="Reconstruction"><a class="docs-heading-anchor" href="#Reconstruction">Reconstruction</a><a id="Reconstruction-1"></a><a class="docs-heading-anchor-permalink" href="#Reconstruction" title="Permalink"></a></h2><p>To perform the reconstruction we need to convert the RawAcquisitionData into and AcquisitionData structure.</p><pre><code class="language-">acqRad2 = AcquisitionData(rawRad2)</code></pre><p>We can also plot the number of projection for both bin :</p><pre><code class="language-">nPro1 = Int32(length(acqRad2.kdata[1,1,1])/N)
nPro2 = Int32(length(acqRad2.kdata[2,1,1])/N)
println(&quot;Number of projection in : \n
- Bin 1 = $nPro1\n
- Bin 2 = $nPro2&quot;)</code></pre><p>Now we can perform a standard reconstruction</p><pre><code class="language-">params = Dict{Symbol, Any}()
params[:reco] = &quot;direct&quot;
params[:reconSize] = (N,N)

Ireco = reconstruction(acqRad2, params)
size(Ireco)</code></pre><p>let&#39;s show the results for first bin</p><pre><code class="language-">plot_im2D(abs.(Ireco[:,:,1,1]),title = &quot;First bin&quot;)</code></pre><p>and the second bin</p><pre><code class="language-">plot_im2D(abs.(Ireco[:,:,1,2]),title = &quot;Second bin&quot;)</code></pre><p>As expected we have more streaking artifacts on the first bin because we reconstruct the image with less projections.</p><h2 id="Reproducibility"><a class="docs-heading-anchor" href="#Reproducibility">Reproducibility</a><a id="Reproducibility-1"></a><a class="docs-heading-anchor-permalink" href="#Reproducibility" title="Permalink"></a></h2><p>This page was generated with the following version of Julia:</p><pre><code class="language-">io = IOBuffer();
versioninfo(io);
split(String(take!(io)), &#39;\n&#39;)</code></pre><p>And with the following package versions</p><pre><code class="language-julia">import Pkg; Pkg.status()</code></pre><pre class="documenter-example-output">Status `~/work/MRIReco.jl/MRIReco.jl/docs/Project.toml`
  [13f3f980] CairoMakie v0.10.2
⌃ [e30172f5] Documenter v0.25.2
  [8ad4436d] ImageUtils v0.2.9
  [98b081ad] Literate v2.14.0
  [f7771a9a] MRIBase v0.3.3
  [c57eb701] MRICoilSensitivities v0.1.1
  [5a6f062f] MRIFiles v0.1.6
  [fb1137e3] MRIOperators v0.1.2
  [bdf86e05] MRIReco v0.7.1 `~/work/MRIReco.jl/MRIReco.jl`
  [9be66c26] MRISampling v0.1.1
  [8988da37] MRISimulation v0.1.1
Info Packages marked with ⌃ have new versions available and may be upgradable.</pre><hr/><p><em>This page was generated using <a href="https://github.com/fredrikekre/Literate.jl">Literate.jl</a>.</em></p></article><nav class="docs-footer"><a class="docs-footer-prevpage" href="../../../custom/">« Customize</a><a class="docs-footer-nextpage" href="../../../API/">API »</a><div class="flexbox-break"></div><p class="footer-message">Powered by <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> and the <a href="https://julialang.org/">Julia Programming Language</a>.</p></nav></div><div class="modal" id="documenter-settings"><div class="modal-background"></div><div class="modal-card"><header class="modal-card-head"><p class="modal-card-title">Settings</p><button class="delete"></button></header><section class="modal-card-body"><p><label class="label">Theme</label><div class="select"><select id="documenter-themepicker"><option value="documenter-light">documenter-light</option><option value="documenter-dark">documenter-dark</option></select></div></p><hr/><p>This document was generated with <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> on <span class="colophon-date" title="Friday 10 February 2023 11:27">Friday 10 February 2023</span>. Using Julia version 1.8.5.</p></section><footer class="modal-card-foot"></footer></div></div></div></body></html>
