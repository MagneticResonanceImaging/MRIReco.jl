<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>Offresonance · Julia MRI Package</title><link href="https://fonts.googleapis.com/css?family=Lato|Roboto+Mono" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.11.2/css/fontawesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.11.2/css/solid.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.11.2/css/brands.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.11.1/katex.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL=".."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" data-main="../assets/documenter.js"></script><script src="../siteinfo.js"></script><script src="../../versions.js"></script><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/documenter-dark.css" data-theme-name="documenter-dark"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/documenter-light.css" data-theme-name="documenter-light" data-theme-primary/><script src="../assets/themeswap.js"></script></head><body><div id="documenter"><nav class="docs-sidebar"><a class="docs-logo" href="../"><img src="../assets/logo.png" alt="Julia MRI Package logo"/></a><div class="docs-package-name"><span class="docs-autofit">Julia MRI Package</span></div><form class="docs-search" action="../search/"><input class="docs-search-query" id="documenter-search-query" name="q" type="text" placeholder="Search docs"/></form><ul class="docs-menu"><li><a class="tocitem" href="../">Home</a></li><li><a class="tocitem" href="../gettingStarted/">Getting Started</a></li><li><a class="tocitem" href="../overview/">Overview</a></li><li><a class="tocitem" href="../acquisitionData/">Acquisition Data</a></li><li><a class="tocitem" href="../filehandling/">File Handling</a></li><li><a class="tocitem" href="../image/">Images</a></li><li><a class="tocitem" href="../trajectories/">Trajectory</a></li><li><a class="tocitem" href="../operators/">Imaging Operators</a></li><li class="is-active"><a class="tocitem" href>Offresonance</a></li><li><a class="tocitem" href="../SENSE/">Parallel Imaging</a></li><li><a class="tocitem" href="../compressedSensing/">Compressed Sensing</a></li><li><a class="tocitem" href="../custom/">Customize</a></li><li><span class="tocitem">Examples</span><ul><li><a class="tocitem" href="../generated/examples/01-binning/">Binning</a></li><li><a class="tocitem" href="../generated/examples/02-extractKspace/">Extract k-space</a></li><li><a class="tocitem" href="../generated/examples/03-subspaceReconstruction/">Subspace</a></li></ul></li><li><a class="tocitem" href="../API/">API</a></li></ul><div class="docs-version-selector field has-addons"><div class="control"><span class="docs-label button is-static is-size-7">Version</span></div><div class="docs-selector control is-expanded"><div class="select is-fullwidth is-size-7"><select id="documenter-version-selector"></select></div></div></div></nav><div class="docs-main"><header class="docs-navbar"><nav class="breadcrumb"><ul class="is-hidden-mobile"><li class="is-active"><a href>Offresonance</a></li></ul><ul class="is-hidden-tablet"><li class="is-active"><a href>Offresonance</a></li></ul></nav><div class="docs-right"><a class="docs-edit-link" href="https://github.com/MagneticResonanceImaging/MRIReco.jl/blob/master/docs/src/offresonance.md" title="Edit on GitHub"><span class="docs-icon fab"></span><span class="docs-label is-hidden-touch">Edit on GitHub</span></a><a class="docs-settings-button fas fa-cog" id="documenter-settings-button" href="#" title="Settings"></a><a class="docs-sidebar-button fa fa-bars is-hidden-desktop" id="documenter-sidebar-button" href="#"></a></div></header><article class="content" id="documenter-page"><h1 id="Offresonance-Correction"><a class="docs-heading-anchor" href="#Offresonance-Correction">Offresonance Correction</a><a id="Offresonance-Correction-1"></a><a class="docs-heading-anchor-permalink" href="#Offresonance-Correction" title="Permalink"></a></h1><p>For trajectories with long readouts the MRI images are degraded by offresonance artifacts, if the offresonance is not taken into account during reconstruction. We provide fast algorithms that are capable of correcting offresonance artifacts provided that the offresonance map is known. Our framework is also capable of correcting T2* relaxation effects. The later are encoded in the real part of the correction map while the offresoanance is encoded in the imaginary part. The following example shows an example of a simulation and reconstruction of MRI data that takes offresonance due to an inhomogeneous fieldmap into account. The example can be run by entering</p><pre><code class="language-julia">include(joinpath(dirname(pathof(MRIReco)),&quot;../docs/src/examples/exampleFieldmap.jl&quot;))</code></pre><p>into the Julia REPL.</p><pre><code class="language-julia">using MRIReco

N = 256
I = shepp_logan(N)
I = circularShutterFreq!(I,1)
cmap = 1im*quadraticFieldmap(N,N,125*2pi)

# simulation parameters
params = Dict{Symbol, Any}()
params[:simulation] = &quot;fast&quot;
params[:trajName] = &quot;Spiral&quot;
params[:numProfiles] = 1
params[:numSamplingPerProfile] = N*N
params[:windings] = 128
params[:AQ] = 3.0e-2
params[:correctionMap] = cmap[:,:,1]

# do simulation
acqData = simulation(I, params)

# reco parameters
params = Dict{Symbol, Any}()
params[:reco] = &quot;direct&quot;
params[:reconSize] = (N,N)
params[:correctionMap] = cmap
params[:alpha] = 1.75
params[:m] = 4.0
params[:K] = 28

# do reconstruction
Ireco = reconstruction(acqData, params)</code></pre><p>The considered quadratic fieldmap looks like this:</p><p><img src="../assets/fieldmap.png" alt="Fieldmap"/></p><p>The reconstruction without and with offresonance correction are shown below:</p><p><img src="../assets/fieldmapReco1.png" alt="NoCorrection"/> <img src="../assets/fieldmapReco2.png" alt="Reconstruction"/></p></article><nav class="docs-footer"><a class="docs-footer-prevpage" href="../operators/">« Imaging Operators</a><a class="docs-footer-nextpage" href="../SENSE/">Parallel Imaging »</a><div class="flexbox-break"></div><p class="footer-message">Powered by <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> and the <a href="https://julialang.org/">Julia Programming Language</a>.</p></nav></div><div class="modal" id="documenter-settings"><div class="modal-background"></div><div class="modal-card"><header class="modal-card-head"><p class="modal-card-title">Settings</p><button class="delete"></button></header><section class="modal-card-body"><p><label class="label">Theme</label><div class="select"><select id="documenter-themepicker"><option value="documenter-light">documenter-light</option><option value="documenter-dark">documenter-dark</option></select></div></p><hr/><p>This document was generated with <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> on <span class="colophon-date" title="Friday 1 August 2025 15:00">Friday 1 August 2025</span>. Using Julia version 1.11.6.</p></section><footer class="modal-card-foot"></footer></div></div></div></body></html>
